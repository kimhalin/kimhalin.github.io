---
layout: post
title: 2022-08-12 TIL
# description: >
#   Howdy! This is an example blog post that shows several types of HTML content supported in this theme.
sitemap: false
hide_last_modified: true
---
2022-08-12 TIL






## static import

static import λ” import ν• ν›„μ— ν΄λμ¤λ… μ—†μ΄ μ½”λ“λ¥Ό κΉ”λ”ν•κ² μ‘μ„±ν•  μ μλ‹¤. 

ex) Assertions.assertEquals() β†’ assertEquals()

## == vs equals

== λ” λ³€μμ λ°μ΄ν„°κ°€ μ €μ¥λ λ©”λ¨λ¦¬ μ„μΉλ¥Ό λΉ„κµ

equals λ” λΉ„κµν•κ³ μ ν•λ” λ€μƒμ λ‚΄μ© μμ²΄ λΉ„κµ

## κ°μ²΄ μ§€ν–¥ μ„¤κ³„ μ›μΉ™

μμ „ν Javaλ¥Ό μ΄μ©ν•΄μ„ κ³ κ° λ“±κΈ‰μ— λ”°λΌ ν• μΈ μ •μ±…μ„ μ μ©ν•λ” ν”„λ΅κ·Έλ¨μ„ μ§λ΄¤λ‹¤. 

- μ—­ν• κ³Ό κµ¬ν„μ„ λ¶„λ¦¬ν–λ”κ°€? O
- λ‹¤ν•μ„±μ„ μ΄μ©ν•΄ μΈν„°νμ΄μ¤μ™€ κµ¬ν„ κ°μ²΄λ¥Ό λ¶„λ¦¬ν–λ”κ°€? O
- OCP, DIP κ°™μ€ κ°μ²΄μ§€ν–¥ μ„¤κ³„ μ›μΉ™μ„ μ¶©μ‹¤ν μ¤€μν–λ”κ°€? X

**ν• μΈ μ •μ±…μ„ λ³€κ²½ν•  λ•, ν΄λΌμ΄μ–ΈνΈ κ°μ²΄μ μ½”λ“λ¥Ό λ³€κ²½ν•΄μ•Όλ§ ν–λ‹¤ !! (OCP, DIP μ„λ°)**

β†’ ν΄λΌμ΄μ–ΈνΈλ” μΈν„°νμ΄μ¤λ¥Ό μμ΅΄ν–μ§€λ§, κµ¬ν„ κ°μ²΄λ„ μμ΅΄ν•κ³  μμ—λ‹¤.

π’΅Β **ν•΄κ²° λ°©λ²•**

μƒμ„±μ μ£Όμ… (AppConfigλ¥Ό ν†µν•΄) β†’ μ‚¬μ© μμ—­κ³Ό κµ¬μ„± μμ—­μ λ¶„λ¦¬

### μ–΄λ–»κ² κ°μ²΄ μ§€ν–¥ μ„¤κ³„ μ›μΉ™μ„ μ§€μΌ°μ„κΉ?

1. SRP λ‹¨μΌ μ±…μ„ μ›μΉ™
    
    ν΄λΌμ΄μ–ΈνΈ κ°μ²΄λ” κµ¬ν„ κ°μ²΄λ¥Ό μƒμ„±ν•κ³ , μ‹¤ν–‰ν•λ” μ—¬λ¬κ°€μ§€ μ±…μ„μ„ κ°€μ§€κ³  μμ—λ‹¤.
    
    β†’ AppConfigμ λ“±μ¥μΌλ΅, ν΄λΌμ΄μ–ΈνΈ κ°μ²΄μ μ±…μ„μ€ just μ‹¤ν–‰, AppConfigμ μ±…μ„μ€ κµ¬ν„ κ°μ²΄ μƒμ„±μΌλ΅ λ‚λ‰κ² λμ—λ‹¤
    
2. DIP μμ΅΄κ΄€κ³„ μ—­μ „ μ›μΉ™
    
    ν΄λΌμ΄μ–ΈνΈ κ°μ²΄λ” μΈν„°νμ΄μ¤λ¥Ό μμ΅΄ν•μ§€λ§, λ™μ‹μ— κµ¬ν„ κ°μ²΄λ„ μμ΅΄ν•κ³  μμ—λ‹¤.
    
    β†’ AppConfigμ λ“±μ¥μΌλ΅, ν΄λΌμ΄μ–ΈνΈ κ°μ²΄λ” μ¤λ΅μ§€ μΈν„°νμ΄μ¤λ¥Ό μμ΅΄ν•κ³ , AppConfigκ°€ ν΄λΌμ΄μ–ΈνΈ μ½”λ“μ— μμ΅΄κ΄€κ³„λ¥Ό μ£Όμ…ν–λ‹¤.
    
3. OCP β€**μ†ν”„νΈμ›¨μ–΄ μ”μ†λ” ν™•μ¥μ—λ” μ—΄λ ¤ μ‡μΌλ‚ λ³€κ²½μ—λ” λ‹«ν€ μμ–΄μ•Ό ν•λ‹¤.β€**
    
    ν• μΈ μ •μ±…μ„ λ³€κ²½ν•λ ¤ ν–μ„ λ•, ν΄λΌμ΄μ–ΈνΈμ μ½”λ“κΉμ§€ λ³€κ²½ν•΄μ•Όλ§ ν–μ—λ‹¤. (ν΄λΌμ΄μ–ΈνΈ μ±…μ„μ—λ” κµ¬ν„ κ°μ²΄ μƒμ„±λ„ μμ—κΈ° λ•λ¬Έ)
    
    β†’ AppConfigμ λ“±μ¥μΌλ΅, μ‚¬μ©(ν΄λΌμ΄μ–ΈνΈ)κ³Ό κµ¬μ„±(AppConfig) μμ—­μΌλ΅ λ‚λ‰κ² λμ—κ³ , μ΄μ  ν• μΈ μ •μ±…μ„ λ³€κ²½ν•λ ¤ ν•  λ• κµ¬μ„± μμ—­μ μ½”λ“ λ”± ν• μ¤„λ§ λ³€κ²½ν•λ©΄ ν•΄κ²°λμ—λ‹¤!
    

## IoC (Inversion of Control)

μ μ–΄μ μ—­μ „

μ•μ„ λ΄¤λ AppConfigλ” ν”„λ΅κ·Έλ¨μ— λ€ν• μ μ–΄ νλ¦„μ— λ€ν• λ¨λ“  κ¶ν•μ„ κ°€μ§€κ³  μλ‹¤. ν΄λΌμ΄μ–ΈνΈ κ°μ²΄λ” μ¤λ΅μ§€ μμ‹ μ λ΅μ§μ„ μ‹¤ν–‰ν•  λΏμ΄λ‹¤.

<span style=β€color:blueβ€>μ΄λ ‡λ“― **ν”„λ΅κ·Έλ¨μ μ μ–΄ νλ¦„μ„ μ§μ ‘ μ μ–΄ν•λ” κ²ƒμ΄ μ•„λ‹λΌ μ™Έλ¶€μ—μ„ κ΄€λ¦¬ν•λ” κ²ƒ**</span>μ„ μ μ–΄μ μ—­μ „(IoC)μ΄λΌ ν•λ‹¤.

## DI(Dependency Injection)

μμ΅΄μ„± μ£Όμ…, μμ΅΄κ΄€κ³„ μ£Όμ…

DIλ¥Ό μ΄μ©ν•λ©΄, μ •μ μΈ ν΄λμ¤ μμ΅΄κ΄€κ³„λ¥Ό λ³€κ²½ν•μ§€ μ•κ³ , λ™μ μΈ κ°μ²΄ μΈμ¤ν„΄μ¤ μμ΅΄κ΄€κ³„λ¥Ό μ‰½κ² λ³€κ²½ν•  μ μλ‹¤!

- **μ •μ μΈ ν΄λμ¤ μμ΅΄κ΄€κ³„**
    
    ν΄λμ¤κ°€ μ‚¬μ©ν•λ” import μ½”λ“λ§ λ³΄κ³  μμ΅΄κ΄€κ³„λ¥Ό μ‰½κ² νλ‹¨ κ°€λ¥
    
- **λ™μ μΈ κ°μ²΄ μΈμ¤ν„΄μ¤ μμ΅΄κ΄€κ³„**
    
    μ• ν”λ¦¬μΌ€μ΄μ… μ‹¤ν–‰ μ‹μ (λ°νƒ€μ„)μ— μ™Έλ¶€μ—μ„ μ‹¤μ  κµ¬ν„ κ°μ²΄λ¥Ό μƒμ„±ν•κ³ , ν΄λΌμ΄μ–ΈνΈμ— μ „λ‹¬ν•΄μ„ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„μ μ‹¤μ  μμ΅΄κ΄€κ³„κ°€ μ—°κ²° λλ” κ²ƒμ„ <span style=β€color:redβ€>**μμ΅΄κ΄€κ³„ μ£Όμ…**</span>
    

AppConfigμ²λΌ κ°μ²΄λ¥Ό μƒμ„±ν•κ³  κ΄€λ¦¬ν•λ©΄μ„ μμ΅΄κ΄€κ³„λ¥Ό μ—°κ²°ν•΄μ£Όλ” κ²ƒμ€ μ¤ν”„λ§μ—μ„ λ­λΌκ³  λ¶€λ¥ΌκΉ?

λ°”λ΅ `DI μ»¨ν…μ΄λ„` λλ” IoC μ»¨ν…μ΄λ„ λΌκ³  ν•λ‹¤

## μ΄μ  μ¤ν”„λ§μ„ μ μ©ν•΄λ³΄μ

~~~Java
// file: "example.java"
@Configuration
public class AppConfig {

    @Bean
    public MemberService memberService() {
        return new MemberServiceImpl(memberRepository());
    }

    @Bean
    public MemoryMemberRepository memberRepository() {
        return new MemoryMemberRepository();
    }

    @Bean
    public OrderService orderService() {
        return new OrderServiceImpl(memberRepository(), discountPolicy());
    }
    @Bean
    public DiscountPolicy discountPolicy(){
        return new RateDiscountPolicy();
    }
}
~~~

Configuration νμΌλ΅ μ„¤μ •ν• Beanλ“¤μ€ μ–΄λ–»κ² κ°€μ Έμ¬κΉ?

`ApplicationContext` λ¥Ό ν†µν•΄ !! (μ¤ν”„λ§ μ»¨ν…μ΄λ„)

*λΉ ν©ν† λ¦¬λ” κ±°μ μ‚¬μ©ν•μ§€ μ•λ”λ‹¤.*

ApplicationContextλ” μΈν„°νμ΄μ¤μ΄κ³ , AnnotationConfigApplicationContextκ°€ κµ¬ν„μ²΄

~~~Java
// file: "example.java"
ApplicationContext applicationContext = new AnnotationConfigApplicationContext(AppConfig.class);
MemberService memberService = applicationContext.getBean("memberService", MemberService.class);
OrderService orderService = applicationContext.getBean("orderService", OrderService.class);
~~~

`@Configuration` κ°€ λ¶™μ€ νμΌμ„ κµ¬μ„± μ •λ³΄λ΅ μ‚¬μ©ν•λ‹¤. `@Bean` μ΄ λ¶™μ€ λ©”μ†λ“ μ΄λ¦„μΌλ΅ μ¤ν”„λ§ λΉμ„ μƒμ„±ν•λ‹¤ !

μ¤ν”„λ§μ€ κΈ°λ³Έμ μΌλ΅ λΉμ„ μƒμ„±ν•λ” λ‹¨κ³„μ™€ μμ΅΄κ΄€κ³„λ¥Ό μ£Όμ…ν•λ” λ‹¨κ³„κ°€ λ‚λ‰μ–΄μ Έ μλ‹¤. 

## μ¤ν”„λ§ λΉ μ΅°ν

μ΄λ° κ² μ™ ν•„μ”ν•λƒλ©΄ λ¶€λ¨ νƒ€μ…μΌλ΅ μ΅°νν•  λ• μμ‹μ΄ μ–΄λ–»κ² μλƒλ¥Ό μ•μ•„μ•Ό μμ΅΄κ΄€κ³„ μ£Όμ…μ‹ μ‹¤μλ¥Ό μ•ν•  μ μκΈ° λ•λ¬Έμ΄λ‹¤ ~ μ‹¤λ¬΄μ—μ„λ” κ±°μ μ‚¬μ©ν•μ§€ μ•λ” μ½”λ“!

- μ• ν”λ¦¬μΌ€μ΄μ… λΉ μ¶λ ¥ λ°©λ²•

~~~Java
// file: "example.java"
@DisplayName("μ• ν”λ¦¬μΌ€μ΄μ… λΉ μ¶λ ¥ν•κΈ°")
void findApplicationBean() {
    String[] beanDefinitionNames = ac.getBeanDefinitionNames();
    for (String beanDefinitionName : beanDefinitionNames) {
        BeanDefinition beanDefinition = ac.getBeanDefinition(beanDefinitionName);

        //Role ROLE_APPLICATION: μ§μ ‘ λ“±λ΅ν• μ• ν”λ¦¬μΌ€μ΄μ… λΉ
        //Role ROLE_INFRASTRUCTURE: μ¤ν”„λ§μ΄ λ‚΄λ¶€μ—μ„ μ‚¬μ©ν•λ” λΉ
        if (beanDefinition.getRole() == BeanDefinition.ROLE_APPLICATION) {
            Object bean = ac.getBean(beanDefinitionName);
            System.out.println("name = " + beanDefinitionName + " object = " + bean);
        }
    }
}
~~~

## BeanDefinition

μ¤ν”„λ§μ΄ λ‹¤μ–‘ν• ν•νƒμ μ„¤μ • μ •λ³΄λ¥Ό BeanDefinitionμΌλ΅ μ¶”μƒν™”ν•΄μ„ μ‚¬μ©! 

ApplicationContextλ” Configurationμ„ μ½λ”λ‹¤. (AnnotatedBeanDefinitionReaderλ¥Ό μ΄μ©) β†’ BeanDefinitionμƒμ„±

## Singleton

singleton μΌλ΅ κ°μ²΄λ¥Ό μƒμ„± (κ°€μ¥ λ‹¨μν•κ³  μ•μ „ν• λ°©λ²•)

```java
public class SingletonService {

    private static final SingletonService instaance= new SingletonService();

    public static SingletonService getInstance() {
        return instaance;
    }

    private SingletonService() {

    }
}
```

λ‹¨μ λ“¤ ..

- μ½”λ“ μμ²΄κ°€ λ§μ΄ λ“¤μ–΄κ°
- μμ΅΄κ΄€κ³„μƒ ν΄λΌμ΄μ–ΈνΈκ°€ κµ¬μ²΄ ν΄λμ¤μ— μμ΅΄, DIP μ„λ°
- private μƒμ„±μλ΅ μμ‹ ν΄λμ¤ λ§λ“¤κΈ° μ–΄λ ¤μ›€

κ·Έλ ‡μ§€λ§ μ¤ν”„λ§μ€ μ΄λ¬ν• λ‹¨μ λ“¤μ„ λ³΄μ™„ν•΄μ„ μ‹±κΈ€ν†¤μ„ μ‚¬μ©ν•  μ μλ„λ΅ ν•΄μ¤€λ‹¤ μ¤ν”„λ§μ€ μµκ³ λ‹¤

μ‹±κΈ€ν†¤μ„ μ‚¬μ©ν•  μ‹μ—λ” κ·Έ κ°μ²΄λ” λ¬΄μ΅°κ±΄ λ¬΄ μƒ νƒ

μ‹¤λ¬΄μ—μ„ μ΄λ° λ¬Έμ κ°€ ν„°μ§€λ©΄ ν°μΌ λ‚λ‹¤β€¦

{:.note title=β€μ£Όμν•  μ "}