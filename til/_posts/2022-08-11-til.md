---
layout: post
title: 2022-08-11 TIL
# description: >
#   Howdy! This is an example blog post that shows several types of HTML content supported in this theme.
sitemap: false
hide_last_modified: true
---

2022-08-11 TIL

## μ •ν•ν™”λ ν¨ν„΄

`μ»¨νΈλ΅¤λ¬`λ¥Ό ν†µν•΄μ„ μ™Έλ¶€ μ”μ²­μ„ λ°›κ³ , `μ„λΉ„μ¤`μ—μ„ λΉ„μ¦λ‹μ¤ λ΅μ§μ„ λ§λ“¤κ³ , `λ¦¬ν¬μ§€ν† λ¦¬`μ—μ„ λ°μ΄ν„° μ €μ¥μ„ ν•λ” ν¨ν„΄

μ •ν•ν™” λμ–΄ μμ

## DI

### Dependency Injection

μƒμ„±μ Autowired μ–΄λ…Έν…μ΄μ…μ΄ λ¶™μ–΄μμΌλ©΄ μ¤ν”„λ§μ΄ μ•μ•„μ„ μ¤ν”„λ§μ»¨ν…μ΄λ„ μ•μ— μλ” MemberServiceλ¥Ό μ°Ύμ•„μ„ μ—°κ²°ν•΄μ¤€λ‹¤!

<aside>
π’΅ DI μ ν•
- ν•„λ“ μ£Όμ… β†’ μ• μΆ‹λ‹¤
- μƒμ„±μ μ£Όμ… β†’ μ μΌ μΆ‹μ€ λ°©λ²•!
- setter μ£Όμ… β†’ setterκ°€ publicμ΄λ―€λ΅ μ¤‘κ°„μ— λ°”κΏ€ μ μμ λ¬Έμ κ°€ μƒκΈΈ μ μλ‹¤.

</aside>

~~~Java
@Autowired
public MemberController(MemberService memberService) {

    this.memberService = memberService;
}
// μƒμ„±μκ°€ ν•λ‚μΌ λ•λ” Autowiredλ¥Ό μƒλµν•΄λ„ λ¨
~~~

~~~Java
@Service
public class MemberService {
~~~

### @Component & @Autowired

**μ»΄ν¬λ„νΈ μ¤μΊ” μ›λ¦¬**

Component μ–΄λ…Έν…μ΄μ…μ„ λ¶™μ΄λ©΄, μ¤ν”„λ§ λΉ(**μ‹±κΈ€ ν†¤**)μΌλ΅ μλ™ λ“±λ΅μ΄ λλ‹¤. (νΉμν• Component μ–΄λ…Έν…μ΄μ…μΌλ΅λ”, Service, Controller, Repositoryκ°€ μλ‹¤.)

κ·ΈλΌ Autowired μ–΄λ…Έν…μ΄μ…μ΄ λ¶™μ€ μƒμ„±μλ” μ¤ν”„λ§μ΄ μ•μ•„μ„ μ¤ν”„λ§ μ»¨ν…μ΄λ„ μ•μ— μλ” μ»΄ν¬λ„νΈ μ¤‘μ— λ§λ” μ»΄ν¬λ„νΈλ¥Ό μ£Όμ…μ‹μΌ μ¤€λ‹¤.

β†’ **μ»΄ν¬λ„νΈ μ¤μΊ”κ³Ό μλ™ μμ΅΄κ΄€κ³„ μ„¤μ •**

!!μ£Όμ

ν”„λ΅μ νΈ ν¨ν‚¤μ§€ ν•μ„μ— μλ” νμΌλ“¤λ§ μ¤ν”„λ§μ΄ νƒμƒ‰ν•λ‹¤.

### @Configuration

@Configuration μ–΄λ…Έν…μ΄μ…μ„ λ¶™μ΄λ©΄ μ¤ν”„λ§μ΄ μ‹¤ν–‰ν•  λ• μ΄ νμΌμ„ μ½λ”λ‹¤. 

β†’ **μλ°” μ½”λ“λ΅ μ§μ ‘ μ¤ν”„λ§ λΉ λ“±λ΅**

~~~Java
@Configuration
public class SpringConfig {
    @Bean
    public MemberService memberService() {
        return new MemberService(memberRepository());
    }

    @Bean
    public MemberRepository memberRepository() {
        return new MemoryMemberRepository();
    }
}
~~~

## JPA

JPAλ” μ—„μ²­λ‚κ² κ°„λ‹¨ν•λ‹¤ β€¦ μ½”λ“κ°€ κ±°μ ν• μ¤„λ΅ λλ‚λ²„λ¦°λ‹¤

μΈν„°νμ΄μ¤λ§μΌλ΅λ„ κ°λ° κ°€λ¥ ?!?!?

## AOP

κ³µν†µμ‚¬ν•­μ„ μ›ν•λ” κ³³μ—!

- **AOPκ°€ ν•„μ”ν• μμ‹**

λ¨λ“  λ©”μ†λ“μ νΈμ¶ μ‹κ°„μ„ μΈ΅μ •ν•κ³  μ‹¶λ‹¤λ©΄?????? λ©”μ†λ“κ°€ 1000κ°λΌλ©΄ ..?

μμ„Ένλ” μ•„μ§ λ¨λ¥΄μ§€λ§ ν”„λ΅μ‹λ¥Ό μ‚¬μ©ν•λ‹¤ μ •λ„ ..

## Test Code

ν…μ¤νΈ μ½”λ“λ” μμ„κ°€ μ •ν•΄μ Έ μμ§€ μ•λ‹¤. κ·Έλμ„ ν•­μƒ κ·Έκ²ƒκ³Ό κ΄€λ ¨ν•μ—¬ μ²λ¦¬λ¥Ό ν•΄μ£Όμ–΄μ•Ό ν•¨!!

μ¤λ κ°•μμ—μ„λ” @AfterEach μ–΄λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•΄ λ©”λ¨λ¦¬μ— μλ” νμ› μ •λ³΄λ“¤μ„ ν…μ¤νΈ μ½”λ“ ν•λ‚κ°€ λλ‚  λ•λ§λ‹¤ clear μ²λ¦¬ν–λ‹¤. 

ν…μ¤νΈ μ½”λ“λ” ν•¨μ μ΄λ¦„μ„ ν•κΈ€λ΅ μ μ–΄λ„ λ¬΄λ°©ν•λ‹¤ ..? μμ–΄κ¶μ—μ„ μΌν•λ” μ‚¬λ μ•„λ‹λ©΄ ν•κΈ€λ΅λ„ λ§μ΄ μ λ”λ‹¤.

### given, when, then

ν…μ¤νΈ μ½”λ“λ¥Ό μ‘μ„±ν•  λ•, //given, //when, //then μ΄λ ‡κ² μ£Όμ„μ„ λ‹¬μ•„μ„ μ„Έ λ¶€λ¶„μΌλ΅ λ‚λ μ„ μ‘μ„±ν•λ©΄ ν›¨μ”¬ μμ›”ν•λ‹¤.

~~~Java
//given
Member member = new Member();
member.setName("hello");

//when
Long saveId = memberService.join(member);

//then
Member findMember = memberService.findOne(saveId).get();
Assertions.assertThat(member.getName()).isEqualTo(findMember.getName());
~~~

## μ½”λ”© Tips

λ‹¨μ¶•ν‚¤

- ctrl + t: λ¦¬ν©ν† λ§ κ΄€λ ¨ν•μ—¬ μµμ…λ“¤μ΄ λ¬λ‹¤. extract methodλ” μ •λ§ μ‹ μ„Έκ³„ ..
- command + shift + t: κ΄€λ ¨ testλ¥Ό λ°”λ΅ λ§λ“¤ μ μλ‹¤!

μ‹¤λ¬΄μ—μ„ ?

- Repositoryλ” κΈ°κ³„μ μΌλ΅, κ°λ°μ¤λ½κ² λ³€μ μ΄λ¦„μ„ μ •ν•κ³ , Serviceλ” λΉ„μ¦λ‹μ¤μ— μ“°μ΄λ” μ©μ–΄λ΅ λ³€μ μ΄λ¦„μ„ μ •ν•λ‹¤!
- μ‹¤λ¬΄μ—μ„λ” μ£Όλ΅ μ •ν•ν™”λ μ»¨νΈλ΅¤λ¬, μ„λΉ„μ¤, λ¦¬ν¬μ§€ν† λ¦¬ κ°™μ€ μ½”λ“λ” μ»΄ν¬λ„νΈ μ¤μΊ”μ„ μ‚¬μ©!
    
    μ •ν•ν™”λμ§€ μ•κ±°λ‚, μƒν™©μ— λ”°λΌ κµ¬ν„ ν΄λμ¤λ¥Ό λ³€κ²½ν•΄μ•Ό ν•λ©΄ μ„¤μ •μ„ ν†µν•΄ μ¤ν”„λ§ λΉμΌλ΅ λ“±λ΅!!